require 'artifacts'
require 'cucumber/rake/task'

VERSION_NUMBER = "1.0.0"
GROUP = "bluemount"

#options.proxy.http = 'http://myproxy:8080'

define 'bluemount' do
  project.version = VERSION_NUMBER
  project.group = GROUP
  project.no_ipr

  iml.local_repository_env_override = nil

  compile.into('target/java').with SHIPPED
  resources
  test.compile.into('target/test/java').with SHIPPED, REFERENCE
#  test.enhance { Rake::Task['features'].execute }

  package(:jar)

  run.using :main => 'bluemount.web.RunJetty'
  run.enhance { cd 'src' }
end

Cucumber::Rake::Task.new(:features => task('compile')) do |t|
  t.cucumber_opts = %w{--format junit --out reports/cucumber --format pretty --expand --color}
end