require 'artifacts'
require 'cucumber/rake/task'

VERSION_NUMBER = "1.0.0"
GROUP = "bluemount"

#options.proxy.http = 'http://myproxy:8080'

define 'bluemount' do
  project.version = VERSION_NUMBER
  project.group = GROUP
  project.no_ipr

  iml.local_repository_env_override = nil

  compile.with SHIPPED
  resources
  test.compile.with SHIPPED, REFERENCE
  test.enhance { Rake::Task['features'].execute }

  package(:jar)

  run.using :main => 'bluemount.RunJetty'
  run.enhance { cd 'src' }
end

Cucumber::Rake::Task.new(:features) do |t|
  t.cucumber_opts = %w{--format pretty --expand --color}
end

namespace :jetty1 do
  task :start do
    puts 'starting'
  end
  task :stop do
    puts 'stopping'
  end
end